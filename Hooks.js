const fs = require('fs');
const path = require('path');
const axios = require('axios');

// üß∑ –í–°–¢–ê–í –°–Æ–î–ò –°–í–û–Æ –°–°–ò–õ–ö–£ WEBHOOK
const webhookUrl = 'https://discord.com/api/webhooks/1369404310340894920/b8cAh0JG0EEB_L7i_dGM-18qO8nw9ZoXNM7ry6W2eTaYhtoTOobyXCJrcqHTpnqmqPMB';

// üìÇ –®–ª—è—Ö –¥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª—É –∑ –∞–≤–∞—Ç–∞—Ä–æ–º
const imagePath = path.join(__dirname, './images/bot_avatar.png'); // –∞–±–æ .jpg, .jpeg

// üìÑ –ó—á–∏—Ç—É—î–º–æ —Ñ–∞–π–ª —ñ –∫–æ–¥—É—î–º–æ —É base64
const imageData = fs.readFileSync(imagePath, { encoding: 'base64' });
const ext = path.extname(imagePath).toLowerCase();
const mimeType = ext === '.jpg' || ext === '.jpeg' ? 'image/jpeg' : 'image/png';
const dataUri = `data:${mimeType};base64,${imageData}`;

// üîÅ –§—É–Ω–∫—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∞
async function updateAvatarAndSend() {
    try {
        // 1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∞
        await axios.patch(webhookUrl, {
            name: 'Voice Role Bot',
            avatar: dataUri,
        });
        console.log('‚úÖ –ê–≤–∞—Ç–∞—Ä —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ.');

        // 2. –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        await axios.post(webhookUrl, {
            content: `
üì¢ **–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –±–æ—Ç—ñ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ**

üéâ –ù–∞ —Ü—å–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ –¥—ñ—é—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –±–æ—Ç–∏!

üîä –û–¥–∏–Ω —ñ–∑ –Ω–∏—Ö ‚Äî **Voice Role Bot**:
–í—ñ–Ω **–≤–∫–ª—é—á–∞—î –∑–≤—É–∫ –ø—Ä–∏ –≤—Ö–æ–¥—ñ —É –≥–æ–ª–æ—Å–æ–≤–∏–π –∫–∞–Ω–∞–ª**, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–≤–æ—î—ó —Ä–æ–ª—ñ.

‚ÑπÔ∏è **–Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å:**
–ù–∞–¥—ñ—à–ª–∏ –≤ —á–∞—Ç –æ–¥–Ω—É –∑ –∫–æ–º–∞–Ω–¥:

\`!info\`
–∞–±–æ
\`!help\`

üîà **–ü—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ –∑–≤—É–∫ –¥–æ —Å–≤–æ—î—ó —Ä–æ–ª—ñ**  
üéß –ó–∞–º—ñ–Ω–∏—Ç–∏ –∑–≤—É–∫ —É –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç  
ü§ñ –î—ñ–∑–Ω–∞—Ç–∏—Å—å –±—ñ–ª—å—à–µ –ø—Ä–æ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

üîê *–¢—ñ–ª—å–∫–∏ —Ç–∏ —Å–∞–º –º–æ–∂–µ—à –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–≤—É–∫ –¥–ª—è —Å–≤–æ—ó—Ö —Ä–æ–ª–µ–π.*

üß† **–ë—É–¥—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º ‚Äî –¥–æ–¥–∞–π —Å–≤—ñ–π –∑–≤—É–∫ —É–∂–µ –∑–∞—Ä–∞–∑! üòâ**

---

üßπ **–û—á–∏—Å—Ç–∏—Ç–∏ —á–∞—Ç –≤—ñ–¥ –∑–∞–π–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å**
      `
        });
        console.log('‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ!');
    } catch (err) {
        console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', err.response?.data || err.message);
    }
}

updateAvatarAndSend();
